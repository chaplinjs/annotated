<!DOCTYPE html>

<html>
<head>
  <title>collection_view.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="chaplin.html">
                chaplin.coffee
              </a>
            
              
              <a class="source" href="application.html">
                application.coffee
              </a>
            
              
              <a class="source" href="composer.html">
                composer.coffee
              </a>
            
              
              <a class="source" href="controller.html">
                controller.coffee
              </a>
            
              
              <a class="source" href="dispatcher.html">
                dispatcher.coffee
              </a>
            
              
              <a class="source" href="composition.html">
                composition.coffee
              </a>
            
              
              <a class="source" href="delayer.html">
                delayer.coffee
              </a>
            
              
              <a class="source" href="event_broker.html">
                event_broker.coffee
              </a>
            
              
              <a class="source" href="helpers.html">
                helpers.coffee
              </a>
            
              
              <a class="source" href="route.html">
                route.coffee
              </a>
            
              
              <a class="source" href="router.html">
                router.coffee
              </a>
            
              
              <a class="source" href="support.html">
                support.coffee
              </a>
            
              
              <a class="source" href="sync_machine.html">
                sync_machine.coffee
              </a>
            
              
              <a class="source" href="utils.html">
                utils.coffee
              </a>
            
              
              <a class="source" href="mediator.html">
                mediator.coffee
              </a>
            
              
              <a class="source" href="collection.html">
                collection.coffee
              </a>
            
              
              <a class="source" href="model.html">
                model.coffee
              </a>
            
              
              <a class="source" href="collection_view.html">
                collection_view.coffee
              </a>
            
              
              <a class="source" href="layout.html">
                layout.coffee
              </a>
            
              
              <a class="source" href="view.html">
                view.coffee
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>collection_view.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="string">'use strict'</span>

_ = require <span class="string">'underscore'</span>
Backbone = require <span class="string">'backbone'</span>
View = require <span class="string">'chaplin/views/view'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Shortcut to access the DOM manipulation library.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$ = Backbone.$</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>General class for rendering Collections.
Derive this class and declare at least <code>itemView</code> or override
<code>initItemView</code>. <code>initItemView</code> gets an item model and should instantiate
and return a corresponding item view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>module.exports = <span class="class"><span class="keyword">class</span> <span class="title">CollectionView</span> <span class="keyword">extends</span> <span class="title">View</span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2>Configuration options</h2>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>These options may be overwritten in derived classes.</p>
<p>A class of item in collection.
This property has to be overridden by a derived class.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  itemView: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Automatic rendering</p>
<p>Per default, render the view itself and all items on creation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  autoRender: <span class="literal">true</span>
  renderItems: <span class="literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Animation</p>
<p>When new items are added, their views are faded in.
Animation duration in milliseconds (set to 0 to disable fade in)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animationDuration: <span class="number">500</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>By default, fading in is done by javascript function which can be
slow on mobile devices. CSS animations are faster,
but require userâ€™s manual definitions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  useCssAnimation: <span class="literal">false</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>CSS classes that will be used when hiding / showing child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animationStartClass: <span class="string">'animated-item-view'</span>
  animationEndClass: <span class="string">'animated-item-view-end'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Selectors and Elements</p>
<p>A collection view may have a template and use one of its child elements
as the container of the item views. If you specify <code>listSelector</code>, the
item views will be appended to this element. If empty, $el is used.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  listSelector: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>The actual element which is fetched using <code>listSelector</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $list: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Selector for a fallback element which is shown if the collection is empty.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  fallbackSelector: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The actual element which is fetched using <code>fallbackSelector</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $fallback: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Selector for a loading indicator element which is shown
while the collection is syncing.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  loadingSelector: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>The actual element which is fetched using <code>loadingSelector</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $loading: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Selector which identifies child elements belonging to collection
If empty, all children of $list are considered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  itemSelector: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Filtering</p>
<p>The filter function, if any.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  filterer: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>A function that will be executed after each filter.
Hides excluded items by default.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  filterCallback: (view, included) -&gt;
    view.$el.stop(<span class="literal">true</span>, <span class="literal">true</span>).toggle included</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>View lists</p>
<p>Track a list of the visible views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  visibleItems: <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h2>Constructor</h2>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  constructor: (options) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Apply options to view instance.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (options)
      _(<span class="keyword">this</span>).extend _.pick options, [<span class="string">'renderItems'</span>, <span class="string">'itemView'</span>]</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Initialize list for visible items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@visibleItems</span> = []

    <span class="keyword">super</span></pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h2>Initialization</h2>

            </div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize: (options = {}) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Don&#39;t call super; the base view&#39;s initialize is a no-op.</p>
<p>Start observing the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@addCollectionListeners</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Apply a filter if one provided.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@filter</span> options.filterer <span class="keyword">if</span> options.filterer?</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Binding of collection listeners.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  addCollectionListeners: -&gt;
    <span class="property">@listenTo</span> <span class="property">@collection</span>, <span class="string">'add'</span>, <span class="property">@itemAdded</span>
    <span class="property">@listenTo</span> <span class="property">@collection</span>, <span class="string">'remove'</span>, <span class="property">@itemRemoved</span>
    <span class="property">@listenTo</span> <span class="property">@collection</span>, <span class="string">'reset sort'</span>, <span class="property">@itemsReset</span></pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h2>Rendering</h2>

            </div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Override View#getTemplateData, donâ€™t serialize collection items here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getTemplateData: -&gt;
    templateData = {length: <span class="property">@collection</span>.length}</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>If the collection is a Deferred, add a <code>resolved</code> flag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> <span class="keyword">typeof</span> <span class="property">@collection</span>.state <span class="keyword">is</span> <span class="string">'function'</span>
      templateData.resolved = <span class="property">@collection</span>.state() <span class="keyword">is</span> <span class="string">'resolved'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>If the collection is a SyncMachine, add a <code>synced</code> flag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> <span class="keyword">typeof</span> <span class="property">@collection</span>.isSynced <span class="keyword">is</span> <span class="string">'function'</span>
      templateData.synced = <span class="property">@collection</span>.isSynced()

    templateData</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>In contrast to normal views, a template is not mandatory
for CollectionViews. Provide an empty <code>getTemplateFunction</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getTemplateFunction: -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Main render method (should be called only once)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: -&gt;
    <span class="keyword">super</span></pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Set the $list property with the actual list container.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@$list</span> = <span class="keyword">if</span> <span class="property">@listSelector</span> <span class="keyword">then</span> <span class="property">@$</span>(<span class="property">@listSelector</span>) <span class="keyword">else</span> <span class="property">@$el</span>

    <span class="property">@initFallback</span>()
    <span class="property">@initLoadingIndicator</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Render all items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@renderAllItems</span>() <span class="keyword">if</span> <span class="property">@renderItems</span></pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <h2>Adding / Removing</h2>

            </div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>When an item is added, create a new view and insert it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  itemAdded: (item, collection, options = {}) =&gt;
    <span class="property">@insertView</span> item, <span class="property">@renderItem</span>(item), options.index</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>When an item is removed, remove the corresponding view from DOM and caches.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  itemRemoved: (item) =&gt;
    <span class="property">@removeViewForItem</span> item</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>When all items are resetted, render all anew.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  itemsReset: =&gt;
    <span class="property">@renderAllItems</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <h2>Fallback message when the collection is empty</h2>

            </div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  initFallback: -&gt;
    <span class="keyword">return</span> <span class="keyword">unless</span> <span class="property">@fallbackSelector</span></pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Set the $fallback property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@$fallback</span> = <span class="property">@$</span>(<span class="property">@fallbackSelector</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Listen for visible items changes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@on</span> <span class="string">'visibilityChange'</span>, <span class="property">@toggleFallback</span></pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Listen for sync events on the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@listenTo</span> <span class="property">@collection</span>, <span class="string">'syncStateChange'</span>, <span class="property">@toggleFallback</span></pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Set visibility initially.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@toggleFallback</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Show fallback if no item is visible and the collection is synced.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  toggleFallback: =&gt;
    visible = <span class="property">@visibleItems</span>.length <span class="keyword">is</span> <span class="number">0</span> <span class="keyword">and</span> (
      <span class="keyword">if</span> <span class="keyword">typeof</span> <span class="property">@collection</span>.isSynced <span class="keyword">is</span> <span class="string">'function'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Collection is a SyncMachine.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="property">@collection</span>.isSynced()
      <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Assume it is synced.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="literal">true</span>
    )
    <span class="property">@$fallback</span>.toggle visible</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <h2>Loading indicator</h2>

            </div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  initLoadingIndicator: -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>The loading indicator only works for Collections
which are SyncMachines.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> <span class="keyword">unless</span> <span class="property">@loadingSelector</span> <span class="keyword">and</span>
      <span class="keyword">typeof</span> <span class="property">@collection</span>.isSyncing <span class="keyword">is</span> <span class="string">'function'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Set the $loading property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@$loading</span> = <span class="property">@$</span>(<span class="property">@loadingSelector</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Listen for sync events on the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@listenTo</span> <span class="property">@collection</span>, <span class="string">'syncStateChange'</span>, <span class="property">@toggleLoadingIndicator</span></pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Set visibility initially.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@toggleLoadingIndicator</span>()

  toggleLoadingIndicator: -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Only show the loading indicator if the collection is empty.
Otherwise loading more items in order to append them would
show the loading indicator. If you want the indicator to
show up in this case, you need to overwrite this method to
disable the check.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    visible = <span class="property">@collection</span>.length <span class="keyword">is</span> <span class="number">0</span> <span class="keyword">and</span> <span class="property">@collection</span>.isSyncing()
    <span class="property">@$loading</span>.toggle visible</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <h2>Filtering</h2>

            </div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Filters only child item views from all current subviews.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getItemViews: -&gt;
    itemViews = {}
    <span class="keyword">for</span> name, view <span class="keyword">of</span> <span class="property">@subviewsByName</span> <span class="keyword">when</span> name.slice(<span class="number">0</span>, <span class="number">9</span>) <span class="keyword">is</span> <span class="string">'itemView:'</span>
      itemViews[name.slice(<span class="number">9</span>)] = view
    itemViews</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Applies a filter to the collection view.
Expects an iterator function as first parameter
which need to return true or false.
Optional filter callback which is called to
show/hide the view or mark it otherwise as filtered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  filter: (filterer, filterCallback) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Save the filterer and filterCallback functions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@filterer</span> = filterer
    <span class="property">@filterCallback</span> = filterCallback <span class="keyword">if</span> filterCallback
    filterCallback ?= <span class="property">@filterCallback</span></pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Show/hide existing views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">unless</span> _(<span class="property">@getItemViews</span>()).isEmpty()
      <span class="keyword">for</span> item, index <span class="keyword">in</span> <span class="property">@collection</span>.models</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Apply filter to the item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        included = <span class="keyword">if</span> <span class="keyword">typeof</span> filterer <span class="keyword">is</span> <span class="string">'function'</span>
          filterer item, index
        <span class="keyword">else</span>
          <span class="literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Show/hide the view accordingly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        view = <span class="property">@subview</span> <span class="string">"itemView:<span class="subst">#{item.cid}</span>"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>A view has not been created for this item yet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">unless</span> view
          <span class="keyword">throw</span> <span class="keyword">new</span> Error <span class="string">'CollectionView#filter: '</span> +
            <span class="string">"no view found for <span class="subst">#{item.cid}</span>"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Show/hide or mark the view accordingly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="property">@filterCallback</span> view, included</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Update visibleItems list, but do not trigger an event immediately.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="property">@updateVisibleItems</span> view.model, included, <span class="literal">false</span></pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Trigger a combined <code>visibilityChange</code> event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@trigger</span> <span class="string">'visibilityChange'</span>, <span class="property">@visibleItems</span></pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <h2>Item view rendering</h2>

            </div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Render and insert all items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  renderAllItems: =&gt;
    items = <span class="property">@collection</span>.models</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Reset visible items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@visibleItems</span> = []</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Collect remaining views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    remainingViewsByCid = {}
    <span class="keyword">for</span> item <span class="keyword">in</span> items
      view = <span class="property">@subview</span> <span class="string">"itemView:<span class="subst">#{item.cid}</span>"</span>
      <span class="keyword">if</span> view</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>View remains.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        remainingViewsByCid[item.cid] = view</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Remove old views of items not longer in the list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> own cid, view <span class="keyword">of</span> <span class="property">@getItemViews</span>() <span class="keyword">when</span> cid <span class="keyword">not</span> <span class="keyword">of</span> remainingViewsByCid</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Remove the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="property">@removeSubview</span> <span class="string">"itemView:<span class="subst">#{cid}</span>"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Re-insert remaining items; render and insert new items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> item, index <span class="keyword">in</span> items</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Check if view was already created.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      view = <span class="property">@subview</span> <span class="string">"itemView:<span class="subst">#{item.cid}</span>"</span>
      <span class="keyword">if</span> view</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Re-insert the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="property">@insertView</span> item, view, index, <span class="literal">false</span>
      <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Create a new view, render and insert it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="property">@insertView</span> item, <span class="property">@renderItem</span>(item), index</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>If no view was created, trigger <code>visibilityChange</code> event manually.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@trigger</span> <span class="string">'visibilityChange'</span>, <span class="property">@visibleItems</span> <span class="keyword">if</span> items.length <span class="keyword">is</span> <span class="number">0</span></pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Instantiate and render an item using the <code>viewsByCid</code> hash as a cache.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  renderItem: (item) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Get the existing view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    view = <span class="property">@subview</span> <span class="string">"itemView:<span class="subst">#{item.cid}</span>"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Instantiate a new view if necessary.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">unless</span> view
      view = <span class="property">@initItemView</span> item</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Save the view in the subviews.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="property">@subview</span> <span class="string">"itemView:<span class="subst">#{item.cid}</span>"</span>, view</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Render in any case.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    view.render()

    view</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Returns an instance of the view class. Override this
method to use several item view constructors depending
on the model type or data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initItemView: (model) -&gt;
    <span class="keyword">if</span> <span class="property">@itemView</span>
      <span class="keyword">new</span> <span class="property">@itemView</span> {model, autoRender: <span class="literal">false</span>}
    <span class="keyword">else</span>
      <span class="keyword">throw</span> <span class="keyword">new</span> Error <span class="string">'The CollectionView#itemView property '</span> +
        <span class="string">'must be defined or the initItemView() must be overridden.'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Inserts a view into the list at the proper position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  insertView: (item, view, index = <span class="literal">null</span>, enableAnimation = <span class="literal">true</span>) -&gt;
    enableAnimation = <span class="literal">false</span> <span class="keyword">if</span> <span class="property">@animationDuration</span> <span class="keyword">is</span> <span class="number">0</span></pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Get the insertion offset.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    position = <span class="keyword">if</span> <span class="keyword">typeof</span> index <span class="keyword">is</span> <span class="string">'number'</span>
      index
    <span class="keyword">else</span>
      <span class="property">@collection</span>.indexOf item</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Is the item included in the filter?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    included = <span class="keyword">if</span> <span class="keyword">typeof</span> <span class="property">@filterer</span> <span class="keyword">is</span> <span class="string">'function'</span>
      <span class="property">@filterer</span> item, position
    <span class="keyword">else</span>
      <span class="literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Get the viewâ€™s top element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    viewEl = view.el
    $viewEl = view.$el</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Start animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> included <span class="keyword">and</span> enableAnimation
      <span class="keyword">if</span> <span class="property">@useCssAnimation</span>
        $viewEl.addClass <span class="property">@animationStartClass</span>
      <span class="keyword">else</span>
        $viewEl.css <span class="string">'opacity'</span>, <span class="number">0</span></pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Hide or mark the view if itâ€™s filtered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@filterCallback</span> view, included <span class="keyword">if</span> <span class="property">@filterer</span></pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Insert the view into the list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $list = <span class="property">@$list</span></pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Get the children which originate from item views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    children = <span class="keyword">if</span> <span class="property">@itemSelector</span>
      $list.children <span class="property">@itemSelector</span>
    <span class="keyword">else</span>
      $list.children()</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Check if it needs to be inserted.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">unless</span> children.get(position) <span class="keyword">is</span> viewEl
      length = children.length
      <span class="keyword">if</span> length <span class="keyword">is</span> <span class="number">0</span> <span class="keyword">or</span> position <span class="keyword">is</span> length</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Insert at the end.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $list.append viewEl
      <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Insert at the right position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> position <span class="keyword">is</span> <span class="number">0</span>
          $next = children.eq position
          $next.before viewEl
        <span class="keyword">else</span>
          $previous = children.eq position - <span class="number">1</span>
          $previous.after viewEl</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Tell the view that it was added to its parent.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    view.trigger <span class="string">'addedToParent'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Update the list of visible items, trigger a <code>visibilityChange</code> event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@updateVisibleItems</span> item, included</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>End animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> included <span class="keyword">and</span> enableAnimation
      <span class="keyword">if</span> <span class="property">@useCssAnimation</span></pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Wait for DOM state change.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        setTimeout =&gt;
          $viewEl.addClass <span class="property">@animationEndClass</span>
        , <span class="number">0</span>
      <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Fade the view in if it was made transparent before.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $viewEl.animate {opacity: <span class="number">1</span>}, <span class="property">@animationDuration</span>

    <span class="keyword">return</span></pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>Remove the view for an item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeViewForItem: (item) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>Remove item from visibleItems list, trigger a <code>visibilityChange</code> event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@updateVisibleItems</span> item, <span class="literal">false</span>
    <span class="property">@removeSubview</span> <span class="string">"itemView:<span class="subst">#{item.cid}</span>"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <h2>List of visible items</h2>

            </div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Update visibleItems list and trigger a <code>visibilityChanged</code> event
if an item changed its visibility.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  updateVisibleItems: (item, includedInFilter, triggerEvent = <span class="literal">true</span>) -&gt;
    visibilityChanged = <span class="literal">false</span>

    visibleItemsIndex = _(<span class="property">@visibleItems</span>).indexOf item
    includedInVisibleItems = visibleItemsIndex &gt; -<span class="number">1</span>

    <span class="keyword">if</span> includedInFilter <span class="keyword">and</span> <span class="keyword">not</span> includedInVisibleItems</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Add item to the visible items list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="property">@visibleItems</span>.push item
      visibilityChanged = <span class="literal">true</span>
    <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">not</span> includedInFilter <span class="keyword">and</span> includedInVisibleItems</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Remove item from the visible items list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="property">@visibleItems</span>.splice visibleItemsIndex, <span class="number">1</span>
      visibilityChanged = <span class="literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Trigger a <code>visibilityChange</code> event if the visible items changed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> visibilityChanged <span class="keyword">and</span> triggerEvent
      <span class="property">@trigger</span> <span class="string">'visibilityChange'</span>, <span class="property">@visibleItems</span>

    visibilityChanged</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <h2>Disposal</h2>

            </div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  dispose: -&gt;
    <span class="keyword">return</span> <span class="keyword">if</span> <span class="property">@disposed</span></pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Remove jQuery objects, item view cache and visible items list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    properties = [<span class="string">'$list'</span>, <span class="string">'$fallback'</span>, <span class="string">'$loading'</span>, <span class="string">'visibleItems'</span>]
    <span class="keyword">delete</span> <span class="keyword">this</span>[prop] <span class="keyword">for</span> prop <span class="keyword">in</span> properties</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Self-disposal.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">super</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
